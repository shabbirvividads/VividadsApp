function __extends(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Component=function(){function e(e){return void 0===e&&(e={}),this.el=document.createElement(e.el||"div"),this}return e.prototype.append=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.map(function(t){e.el.appendChild(t.el)}),this},e.prototype.style=function(e){var t=this;return Object.keys(e).map(function(n){"length"!=n&&"parentRule"!=n&&(t.el.style[n]="function"==typeof e[n]?e[n]():e[n])}),this},e.prototype.removeChildren=function(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild);return this},e}(),Emitter=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({once:!1,ran:0,event:t})},e.prototype.once=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({once:!0,ran:0,event:t})},e.prototype.emit=function(e,t){for(var n=0,o=this.listeners[e]||[];n<o.length;n++){var i=o[n];(i.ran<1||!i.once)&&(i.ran++,i.event(t))}},e}(),emitter=new Emitter,Div=function(e){function t(t){void 0===t&&(t="");var n=e.call(this)||this;return n.el.innerHTML=t,n}return __extends(t,e),t}(Component),Router=function(){function e(){}return e.on=function(e,t){var n=new RegExp(e.split("/").slice(1).reduce(function(e,t){return e+"/"+(0==t.indexOf(":")?"\\w+.*":t)},"")+"$");return this.routes[e]={handler:t,regex:n},this},e.getParam=function(e){},e.route=function(e){var t=this,n=e.split("#")[0],o="#"+(e.split("#")[1]||"");n!==this.currentPathName&&(Object.keys(this.routes).map(function(e){t.routes[e].regex.test(n)&&t.routes[e].handler(n.split("/").reverse()[0])}),this.currentPathName=n),o?(setTimeout(function(){var e=document.getElementById(o);e?window.scrollBy({left:0,top:e.getBoundingClientRect().top-48,behavior:"smooth"}):window.scrollTo({left:0,top:0,behavior:"smooth"})},200),setTimeout(function(){emitter.emit("scroll")},400)):window.scrollTo({left:0,top:0,behavior:"smooth"}),window.history.pushState("","",e),emitter.emit("route-change",e)},e.init=function(){var e=this;window.onpopstate=function(t){return e.route(window.location.pathname+window.location.hash)},document.addEventListener("click",function(t){if(t.target&&t.target.href&&t.target.href.indexOf(window.location.origin)>-1){t.preventDefault();var n=t.target.href.replace(window.location.origin,"");e.route(n)}}),this.route(window.location.pathname+window.location.hash)},e.currentPathName="",e.currentHash="#",e.routes={},e}(),Link=function(e){function t(t,n,o,i){void 0===n&&(n=""),void 0===o&&(o="_self"),void 0===i&&(i="");var r=e.call(this,{el:"a"})||this;return r.el.textContent=n,r.el.href=t,r.el.target=o,r.el.title=i,r.el.addEventListener("click",function(e){r.click()}),r.el.addEventListener("mouseover",function(){return r.hover()}),r.el.addEventListener("mouseover",function(){return r.style({textDecoration:"underline"})}),r.el.addEventListener("mouseleave",function(){return r.leave()}),r.el.addEventListener("mouseleave",function(){return r.style({textDecoration:"none"})}),r.style({textDecoration:"none"}),r}return __extends(t,e),t.prototype.hover=function(){},t.prototype.leave=function(){},t.prototype.click=function(){},t}(Component),TextBox=function(e){function t(t){void 0===t&&(t="");var n=e.call(this,{el:"input"})||this;return n.el.addEventListener("input",function(){return n.onInput(n.el.value)}),n.el.placeholder=t,n}return __extends(t,e),t.prototype.onInput=function(e){},t}(Component),Main=function(e){function t(t){var n=e.call(this)||this;return n.container=(new Div).style({columnCount:window.innerWidth>1200?4:window.innerWidth>700?2:1}),n.title=new Div("All templates").style({fontSize:"24px",lineHeight:"30px",fontWeight:"bold",color:"#666",marginBottom:"20px"}),n.textSearch=new TextBox("Search").style({width:"100%",padding:"10px 0",border:"none",borderBottom:"1px solid #ccc",marginBottom:"20px",fontSize:"16px"}),n.update(t||window.location.pathname.slice(1).split("/")[0]),emitter.on("change-lang",function(e){return n.update(e)}),n.style({padding:"20px"}),n.append(n.title),n.append(n.textSearch),n.textSearch.onInput=function(e){return n.update(window.location.pathname.slice(1).split("/")[0]||"en",e)},n.append(n.container),n}return __extends(t,e),t.prototype.update=function(e,t){var n=this;void 0===t&&(t="");var o="All templates",i="Search";switch(e){case"de-DE":o="Alle Vorlagen",i="Suche";break;case"es-ES":o="Todas las plantillas",i="Buscar";break;case"fr-FR":o="Tous les modèles",i="Chercher";break;case"it":o="Tutti i modelli",i="Ricerca";break;case"nl":o="Alle sjablonen",i="Zoeken"}this.title.el.textContent=o,this.textSearch.el.placeholder=i,this.container.removeChildren(),emitter.on("large",function(){return n.container.style({columnCount:4})}),emitter.on("small",function(){return n.container.style({columnCount:2})}),emitter.on("mini",function(){return n.container.style({columnCount:1})}),cfdata.sort(function(t,n){return(t.name[e]||"undefined").localeCompare(n.name[e])}).filter(function(n){return(n.name[e]||"").toLowerCase().indexOf(t.toLowerCase())>-1}).filter(function(t){return t.available[e]}).map(function(t){var o=new Link("/"+e+"/templates/"+(t.slug.en||"Undefined"),t.name[e]+" ("+t.templates.en.length+")","_self").style({pageBreakInside:"avoid",breakInside:"avoid",color:"#09a0f6",fontSize:"14px",fontWeight:400,display:"block",lineHeight:"28px",textDecoration:"none"});o.hover=function(){return o.style({textDecoration:"underline"})},o.leave=function(){return o.style({textDecoration:"none"})},n.container.append(o)})},t}(Component),Template=function(e){function t(t){var n=e.call(this)||this;return n.update(t||window.location.pathname.slice(1).split("/")[0]),emitter.on("change-lang",function(e){return n.update(e)}),n}return __extends(t,e),t.prototype.update=function(e){var t=this;this.removeChildren(),this.append(new Link("/"+e+"/templates","🏠","_self").style({marginBottom:"20px",fontSize:"20px"})),setTimeout(function(){var n=window.location.pathname.split("/").pop().split("-")[0],o=cfdata.filter(function(e){return(e.slug.en||"undefined")==n})[0];o||Router.route("/"+e+"/templates"),t.append(new Div((o||"undefined").name[e]||"undefined").style({color:"#4a4a4a",fontFamily:"museo900",fontWeight:900,fontSize:"36px",lineHeight:"30px",marginBottom:"20px",marginTop:"20px"}));var i="Size",r="Examples",l="Templates";switch(e){case"de-DE":i="Größe",r="Beispiele",l="Vorlagen";break;case"es-ES":i="Tamaño",r="Ejemplos",l="Plantillas";break;case"fr-FR":i="Taille",r="Exemples",l="Modèles";break;case"it":i="Dimensione",r="Esempi",l="Modelli";break;case"nl":i="Grootte",r="Voorbeelden",l="Templates"}var a=new Div(i).style({color:"#666",fontWeight:"bold",fontSize:"16px",width:"55%",display:"inline-block",paddingLeft:"5px"}),s=new Div(r).style({color:"#666",fontWeight:"bold",fontSize:"16px",width:"23%",display:"inline-block"}),c=new Div(l).style({color:"#666",fontWeight:"bold",fontSize:"16px",width:"20%",display:"inline-block"}),u=(new Div).style({borderTop:"1px solid #ccc",borderBottom:"1px solid #ccc",padding:"10px 0",marginBottom:"10px"});u.append(a,s,c),t.append(u),o.templates.en.map(function(n,o){var i=o%2!=0?"#f9fafb":"#fff",r=(new Div).style({cursor:"default",backgroundColor:i});r.el.addEventListener("mouseover",function(){return r.style({backgroundColor:"#ecf0f3"})}),r.el.addEventListener("mouseleave",function(){return r.style({backgroundColor:i})}),r.append(new Div(n.name[e]).style({color:"#666",width:"55%",display:"inline-block",padding:"10px 5px"})),n.pdf&&n.pdf.file[e]&&r.append(new Link(n.pdf.file[e].url,"PDF","_blank").style({width:"23%",display:"inline-block",color:"#09a0f6",padding:"10px 0"})),n.ind&&n.ind.file.en&&r.append(new Link(n.ind.file.en.url,"Indesign","_blank").style({width:"20%",display:"inline-block",color:"#09a0f6",padding:"10px 0"})),n.name[e]&&t.append(r)})},10),emitter.on("large",function(){return t.style({padding:"20px"})}),emitter.on("small",function(){return t.style({padding:"10px"})}),emitter.on("mini",function(){return t.style({padding:"10px"})}),this.style({padding:window.innerWidth>1200?"20px":"10px"})},t}(Component),CSelect=function(e){function t(t){var n=e.call(this,{el:"select"})||this;return t.map(function(e){var t=document.createElement("option");t.value=e.value,t.textContent=e.text,n.el.options.add(t)}),n.el.addEventListener("change",function(){return n.onChange(n.el.options[n.el.selectedIndex].text)}),n}return __extends(t,e),t.prototype.onChange=function(e){},t.prototype.setOption=function(e){console.log(e),this.el.value=e},t}(Component),App=function(e){function t(t){function n(e){if(e){var t=slugs[e];return console.log(e,t,"results"),t||n(e.split("-").slice(0,-1).join("-"))}}var o=e.call(this)||this;o.pages=[];var i=new CSelect([{value:"en",text:"en"},{value:"de-DE",text:"de-DE"},{value:"es-ES",text:"es-ES"},{value:"fr-FR",text:"fr-FR"},{value:"it",text:"it"},{value:"nl",text:"nl"}]);i.style({position:"fixed",top:"20px",right:"20px"}),i.onChange=function(e){emitter.emit("change-lang",e),localStorage.setItem("hello-templates-lang",e),window.history.pushState("","","/"+e+"/"+window.location.pathname.slice(1).split("/").slice(1).join("/"))},console.log("------------ Detecting language...");var r="",l=decodeURIComponent(window.location.search).match(/(?<=\.)\S{2}(?=\/)/g);l&&l.length&&(r=l[0].replace(/\//,"").split(".").pop()),console.log("------------ looking at the url..."),r&&console.log("------------ Found in url:",r);var a=localStorage.getItem("hello-templates-lang");console.log("------------ Searching localstorage"),a&&console.log("------------ Found in localstorage:",a),console.log("------------ Checking system language...");var s=o.getFromNavigator();s&&console.log("------------ Found in system: ",s);var c=r||a||s;"uk"==c&&(c="en"),console.log("--------------------------------------"),console.log("------------ Default lang is:",c),c?i.setOption(c):localStorage.setItem("hello-templates-lang",c);var u=new Div;o.append(i,u),"/"==window.location.pathname&&(window.location.pathname="/"+c+"/templates"),"/templates"==window.location.pathname&&(window.location.pathname="/"+c+"/templates");var d=decodeURIComponent(window.location.search).match(/(?<=url=)\S+(?=\&|\n|$)/g);return console.log("base match",d),d&&d.length&&setTimeout(function(){var e=n(decodeURIComponent(d[0]));Router.route("/"+c+"/templates/"+e)},50),Router.on("/:lang/templates",function(){u.removeChildren(),u.append(new Main(i.el.value))}),Router.on("/:lang/templates/:id",function(){u.removeChildren(),u.append(new Template(i.el.value))}),Router.init(),window.addEventListener("scroll",function(e){return emitter.emit("scroll")}),window.addEventListener("resize",function(e){return o.handleSize()}),setTimeout(function(){emitter.emit("scroll"),o.handleSize()},1e3),setTimeout(function(){emitter.emit("scroll"),o.handleSize()},2e3),setTimeout(function(){emitter.emit("scroll"),o.handleSize()},4e3),o}return __extends(t,e),t.prototype.getFromNavigator=function(){var e="en";return 0==window.navigator.language.indexOf("en")&&(e="en"),0==window.navigator.language.indexOf("de")&&(e="de-DE"),0==window.navigator.language.indexOf("es")&&(e="es-ES"),0==window.navigator.language.indexOf("fr")&&(e="fr-FR"),0==window.navigator.language.indexOf("it")&&(e="it"),0==window.navigator.language.indexOf("nl")&&(e="nl"),e},t.prototype.handleSize=function(){window.innerWidth>1600&&emitter.emit("huge"),window.innerWidth>1200&&window.innerWidth<=1600&&emitter.emit("large"),window.innerWidth<=1200&&window.innerWidth>980&&emitter.emit("small"),window.innerWidth<=980&&emitter.emit("mini")},t}(Component);document.onreadystatechange=function(){"interactive"!==document.readyState&&"complete"!==document.readyState||document.body.replaceChild(new App({path:"/"}).el,document.getElementById("pre"))};
